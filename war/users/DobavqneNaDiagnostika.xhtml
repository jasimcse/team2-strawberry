<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="/common/template.xhtml">
	
	<ui:define name="pageContent">
	    <h:form>
	<table class="mainTable">
	<tr><td>
	    <h:outputLabel value="Номер на рама*"><br />
	    	<h:inputText id="vin" value="#{dobavqneNaDiagnostika.vehicle.VIN}"
	    		readonly="true"/>
	    </h:outputLabel> 
	    </td>
	    <td>
	    <h:commandButton value="Избери" class="regButton"
							style="width:80px;height:40px;margin-top:20px;" action="#{dobavqneNaDiagnostika.chooseAvtomobil()}" /> 
	    </td>
	    </tr>
	    <tr>
	    <td>
	    <h:outputLabel value="Пробег (километра)*"><br />
	    	<h:inputText id="mileage" value="#{dobavqneNaDiagnostika.mileage}" maxlength="7"
	    		required="true" requiredMessage="задължително поле!"
				converterMessage="Пробегът трябва да е цяло положително число от порядъка на 0 до 9999999."
				validatorMessage="Пробегът трябва да е цяло положително число от порядъка на 0 до 9999999." >
				<f:validateLongRange minimum="0" />
			</h:inputText>
	    	<br/>
	    	<h:message for="mileage" class="errorMsg"/>
	    </h:outputLabel> 
	   	</td>
	    <td>
	    <h:outputLabel value="Цена на диагностиката*"><br />
	    	<h:inputText id="price" value="#{dobavqneNaDiagnostika.price}" maxlength="10" 
	    		required="true" requiredMessage="задължително поле!" 
	    		converterMessage="Цената трябва да е дробно число от порядъка на 0 до 10000."
	    		validatorMessage="Цената трябва да е дробно число от порядъка на 0 до 10000.">
	    		<f:validateDoubleRange minimum="0" maximum="10000"/>
	    	</h:inputText>
	    	<br/>
	    	<h:message for="price" class="errorMsg" />
	    </h:outputLabel>
	     </td>
	    <td>
	    <h:outputLabel value="Статус на диагностиката*"><br />
	    	<h:selectOneMenu value="#{dobavqneNaDiagnostika.status}">
				<f:selectItems value="#{dobavqneNaDiagnostika.diagStatus}"  />
			</h:selectOneMenu>
	    </h:outputLabel>
	    </td>
	    </tr>
	   <tr>
	   <td>
	    <h:outputLabel value="Номер на платежно нареждане"><br />
	    	<h:inputText id="paynumber" value="#{dobavqneNaDiagnostika.paymentNumber}" maxlength="50" />
	    </h:outputLabel> 
	    </td>
	    </tr>
	    </table>
	    
	    
		<h:outputLabel value="Услуги, които трябва да бъдат извършени според извършената диагностика:">
	    	<h:commandButton value="Избери" action="#{dobavqneNaDiagnostika.chooseUsluga()}" class="inTableButton"/> 
	    </h:outputLabel>
	    <br />
		<div style="overflow-x: auto;"> <!-- scroll bar -->
		<h:dataTable
			value="#{dobavqneNaDiagnostika.spisukUslugi}"
			var="curr"
			rowClasses="notSelectedRow">
				
			<h:column>
				<f:facet name="header">Наименование на услугата</f:facet>
				#{curr.service.description}
			</h:column>
				
			<h:column>
				<f:facet name="header">Премахни</f:facet>
				<h:commandLink action="#{dobavqneNaDiagnostika.deleteUsluga(curr)}" value="Премахни" />
			</h:column> 
		</h:dataTable>
		</div>
		<br />

			
		<h:outputLabel value="Резервни части, които трябва да бъдат сменени според извършената диагностика:">
	    	<h:commandButton  value="Избери" action="#{dobavqneNaDiagnostika.chooseSparePart()}" class="inTableButton"/> 
	    </h:outputLabel>
	    <br /> 
		<div style="overflow-x: auto;"> <!-- scroll bar -->
		<h:dataTable
			value="#{dobavqneNaDiagnostika.spisukRezervni4asti}"
			var="curr"
			rowClasses="notSelectedRow">
				
			<h:column>
				<f:facet name="header">Група на резервната част</f:facet>
				#{curr.sparePart.sparePartGroup.description}
			</h:column>
				
			<h:column>
				<f:facet name="header">Име на резервната част</f:facet>
				#{curr.sparePart.name}
			</h:column>
				
			<h:column>
				<f:facet name="header">Нужно количество</f:facet>
				<h:inputText id="quantity" value="#{curr.quantity}">
					<f:validateDoubleRange minimum="0.001" />
				</h:inputText>
			</h:column>
			
			<h:column>
				<f:facet name="header">Мерна единица</f:facet>
				#{curr.sparePart.measuringUnit}
			</h:column>
				
			<h:column>
				<f:facet name="header">Премахни</f:facet>
				<h:commandLink action="#{dobavqneNaDiagnostika.deleteSparePart(curr)}" value="Премахни" />
			</h:column>
		
			</h:dataTable>
		</div>
		
		<table class="buttonTable"><tr><td>
	   	<h:commandButton value="Добави" 
	   	class="regButton"
							style="width:80px;height:40px;margin-top:20px;margin-left:-40px;"
	   		 action="#{dobavqneNaDiagnostika.addDiagnostika()}"/> 
	    <br />
	    
	    <h:outputText value="#{dobavqneNaDiagnostika.errorMessage}"/>
	    </td></tr></table>
	    </h:form>
	</ui:define>
	
</ui:composition>
</html>