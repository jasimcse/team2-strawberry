<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="/common/template.xhtml">
	
	<ui:define name="pageContent">
	
		<h:form>
			<h:panelGroup>
				<h:outputLabel value="Име на доставчик">
					<h:selectOneMenu>
						<f:selectItems value="#{pregledNaPoru4kaNa4asti.suppliers}" var="currSupplier"
							itemLabel="#{currSupplier.name}" itemValue="#(currSupplier.ID)" />					
					</h:selectOneMenu>
				</h:outputLabel>
				<br />
				<h:outputLabel value="Статус">
					<h:selectOneMenu>
						<f:selectItems value="#{pregledNaPoru4kaNa4asti.statuses}" var="currSstatus"/>					
					</h:selectOneMenu>
				</h:outputLabel>
				<br />
				<h:outputLabel value="Дата (от)">
					<h:inputText id="dateFrom"/>
				</h:outputLabel>
				<h:outputLabel value="Дата (до)">
					<h:inputText id="dateTo"/>
				</h:outputLabel>
				<br />
				
				<h:commandButton value="Търси" disabled="true" />
				<h:commandButton value="Изчисти" disabled="true" /> &lt;---- Да се направи
			</h:panelGroup>
		</h:form>
		
		<div style="overflow-x: auto;"> <!-- scroll bar -->
		<h:form>
			
			<!-- за Калин - избрания ред ще има клас = "selectedRow", неизбраните = "notSelectedRow" -->
			<h:dataTable
				rows="#{configurationProperties.getPageSize()}"
				value="#{pregledNaPoru4kaNa4asti.spisukPoru4ki}"
			    first="0"
			    var="curr"
			    rowClasses="#{pregledNaPoru4kaNa4asti.rowStyleClasses}">
				
				<h:column>
					<f:facet name="header">Наименование на доставчик</f:facet>
					<h:outputText value="#{curr.supplier.name}" />
				</h:column>
				
				<h:column>
					<f:facet name="header">Име на служител</f:facet>
					<h:outputText value="#{curr.employee.name}" />
				</h:column>
				
				<h:column>
					<f:facet name="header">Фамилия на служител</f:facet>
					<h:outputText value="#{curr.employee.family}" />
				</h:column>
				
				<h:column>
					<f:facet name="header">Дата на поръчка</f:facet>
					<h:outputText value="#{curr.date}">
						<f:convertDateTime pattern="dd.MM.yyyy" />
					</h:outputText>
				</h:column>
				
				<h:column>
					<f:facet name="header">Статус</f:facet>
					<h:outputText value="#{curr.status == '1' ? 'Нова' : 'Изпълнена'}" />
				</h:column>
				
				<h:column>
					<f:facet name="header">Прегледай</f:facet>
					<h:commandLink action="#{pregledNaPoru4kaNa4asti.selectRow(curr)}" value="Прегледай" />
				</h:column>
				
				<h:column rendered="#{pregledNaPoru4kaNa4asti.choosingAllowed}">
					<f:facet name="header">Избери</f:facet>
					<h:commandLink action="#{pregledNaPoru4kaNa4asti.chooseWarehouseOrder(curr)}" value="Избери" />
				</h:column>
				
				
				<f:facet name="footer">
				
					<!-- предишна страница -->
					<h:commandLink disabled="#{pregledNaPoru4kaNa4asti.page - 1 lt 0}"
						action="#{pregledNaPoru4kaNa4asti.setPage(pregledNaPoru4kaNa4asti.page - 1)}"
						value="&lt;&lt;" />
						
					<h:outputText value=" " />
						
					<!-- други страници -->
					<ui:repeat value="#{pregledNaPoru4kaNa4asti.pagesList}" var="currPage">
						<h:commandLink
							disabled="#{pregledNaPoru4kaNa4asti.getPage() eq currPage.intValue() - 1}"
							action="#{pregledNaPoru4kaNa4asti.setPage(currPage.intValue() - 1)}"
							value="#{currPage}" />
							
						<h:outputText value=" " />
					</ui:repeat>
					
					<!-- следваща страница -->
					<h:commandLink disabled="#{pregledNaPoru4kaNa4asti.page + 1 ge pregledNaPoru4kaNa4asti.pagesCount}"
						action="#{pregledNaPoru4kaNa4asti.setPage(pregledNaPoru4kaNa4asti.page + 1)}"
						value="&gt;&gt;" />
							
				</f:facet>
				 
			</h:dataTable>
		</h:form>
		</div>
		

	    <h:outputLabel value="Име доставчик">
	    	<h:inputText id="supplierName" value="#{pregledNaPoru4kaNa4asti.supplier.name}"
	    		readonly="true"/>
	    </h:outputLabel> 
	    <br />
	    
	    <h:outputLabel value="Име автосервиз">
	    	<h:inputText id="autoserviceName" value="#{pregledNaPoru4kaNa4asti.autoservice.name}"
	    		readonly="true"/>
	    </h:outputLabel> 
	    <br />
	    
	    <h:outputLabel value="Име служител">
	    	<h:inputText id="employeeName" value="#{pregledNaPoru4kaNa4asti.employee.name}"
	    		readonly="true"/>
	    	<h:inputText id="employeeFamily" value="#{pregledNaPoru4kaNa4asti.employee.family}"
	    		readonly="true"/>
	    </h:outputLabel> 
	    <br />
	    
	    <h:outputLabel value="Дата на поръчката">
	    	<h:inputText id="date" value="#{pregledNaPoru4kaNa4asti.date}"
	    		readonly="true">
	    		<f:convertDateTime pattern="dd.MM.yyyy" />
	    	</h:inputText>
	    </h:outputLabel> 
	    <br />
	    
	    <h:outputLabel value="Статус на поръчката">
	    	<h:inputText id="status" value="#{pregledNaPoru4kaNa4asti.status}"
	    		readonly="true" />
	    </h:outputLabel> 
	    <br />
	    
	    
	    
		<h:outputText value="Поръчани резервни части" />
		<br />
	    
	    <!-- TODO: може ли да се сложи scroll bar по Y с определен брой редове --> 
		<div style="overflow-x: auto;"> <!-- scroll bar -->
		<h:dataTable
			value="#{pregledNaPoru4kaNa4asti.spisuk4asti}"
			var="curr"
			rowClasses="notSelectedRow">
			
			<h:column>
				<f:facet name="header">Група</f:facet>
				#{curr.sparePart.sparePartGroup.description}
			</h:column>
			
			<h:column>
				<f:facet name="header">Наименование</f:facet>
				#{curr.sparePart.name}
			</h:column>
			
			<h:column>
				<f:facet name="header">Мерна единица</f:facet>
				#{curr.sparePart.measuringUnit}
			</h:column>
			
			<h:column>
				<f:facet name="header">Поръчано количество</f:facet>
				#{curr.orderedQuantity}
			</h:column>
			
			<h:column>
				<f:facet name="header">Доставено количество</f:facet>
				#{curr.deliveredQuantity}
			</h:column>
				
		</h:dataTable>
		</div>

	</ui:define>
	
</ui:composition>
</html>